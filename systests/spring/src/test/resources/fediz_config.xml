<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!-- Place in Tomcat conf folder or other location as designated in this sample's webapp/META-INF/context.xml file. 
     Keystore referenced below must have IDP STS' public cert included in it.  This example re-uses the Tomcat SSL 
     keystore (tomcat-rp.jks) for this task; alternatively you may wish to use a Fediz-specific keystore instead. 
-->
<FedizConfig>
	<contextConfig name="/fedizhelloworld">
		<audienceUris>
			<audienceItem>urn:org:apache:cxf:fediz:fedizhelloworld</audienceItem>
		</audienceUris>
		<certificateStores>
			<trustManager>
				<keyStore file="ststrust.jks" password="storepass" type="JKS" />
			</trustManager>
		</certificateStores>
		<trustedIssuers>
			<issuer subject=".*CN=www.sts.com.*" certificateValidation="ChainTrust"
				name="DoubleItSTSIssuer" />
			<issuer subject=".*CN=REALMA.*" certificateValidation="ChainTrust"
			    name="REALM A"/>				
		</trustedIssuers>
		<maximumClockSkew>1000</maximumClockSkew>
		<protocol xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
			xsi:type="federationProtocolType" version="1.0.0">
			<realm>urn:org:apache:cxf:fediz:fedizhelloworld</realm>
			<issuer>https://localhost:${idp.https.port}/fediz-idp/federation</issuer>
			<roleDelimiter>,</roleDelimiter>
			<roleURI>http://schemas.xmlsoap.org/ws/2005/05/identity/claims/role</roleURI>
                        <reply>/j_spring_fediz_security_check</reply>
			<!--<authenticationType type="String">some auth type</authenticationType>-->
			<!--<homeRealm type="Class">org.apache.fediz.realm.MyHomeRealm</homeRealm>-->
			<!--<freshness>0</freshness>-->
			<!--<reply>reply value</reply>-->
			<!--<request>REQUEST</request>-->
			<homeRealm type="String">urn:org:apache:cxf:fediz:idp:realm-A</homeRealm>
			<claimTypesRequested>
				<claimType type="a particular claim type" optional="true" />
			</claimTypesRequested>
		</protocol>
	</contextConfig>
	<contextConfig name="/fedizhelloworld_spring2">
		<audienceUris>
			<audienceItem>urn:org:apache:cxf:fediz:fedizhelloworld</audienceItem>
		</audienceUris>
		<certificateStores>
			<trustManager>
				<keyStore file="ststrust.jks" password="storepass" type="JKS" />
			</trustManager>
		</certificateStores>
		<trustedIssuers>
			<issuer subject=".*CN=www.sts.com.*" certificateValidation="ChainTrust"
				name="DoubleItSTSIssuer" />
			<issuer subject=".*CN=REALMA.*" certificateValidation="ChainTrust"
			    name="REALM A"/>				
		</trustedIssuers>
		<maximumClockSkew>1000</maximumClockSkew>
		<protocol xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
			xsi:type="federationProtocolType" version="1.0.0">
			<realm>urn:org:apache:cxf:fediz:fedizhelloworld</realm>
			<issuer>https://localhost:${idp.https.port}/fediz-idp/federation</issuer>
			<roleDelimiter>,</roleDelimiter>
			<roleURI>http://schemas.xmlsoap.org/ws/2005/05/identity/claims/role</roleURI>
                        <reply>/j_spring_fediz_security_check</reply>
			<!--<authenticationType type="String">some auth type</authenticationType>-->
			<!--<homeRealm type="Class">org.apache.fediz.realm.MyHomeRealm</homeRealm>-->
			<!--<freshness>0</freshness>-->
			<!--<reply>reply value</reply>-->
			<!--<request>REQUEST</request>-->
			<homeRealm type="String">urn:org:apache:cxf:fediz:idp:realm-A</homeRealm>
			<claimTypesRequested>
				<claimType type="a particular claim type" optional="true" />
			</claimTypesRequested>
		</protocol>
	</contextConfig>	
</FedizConfig>

